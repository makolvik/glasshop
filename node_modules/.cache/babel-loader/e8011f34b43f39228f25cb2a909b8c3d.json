{"ast":null,"code":"import React, { useState } from \"react\";\nexport const ContextApp = React.createContext();\nexport const initialState = {\n  cart: [{\n    id: 1,\n    name: \"item1\",\n    price: 45,\n    quant: 1,\n    total: 45,\n    art: 123\n  }, {\n    id: 2,\n    name: \"item1\",\n    price: 45,\n    quant: 1,\n    total: 45,\n    art: 124\n  }, {\n    id: 3,\n    name: \"item1\",\n    price: 45,\n    quant: 1,\n    total: 45,\n    art: 125\n  }],\n  total: 135,\n  order: []\n};\nexport const itemState = {\n  title: \"FIRE MIRROR COLORBOOST  POLARIZED SMOKE LENS\",\n  price: 450,\n  art: 125,\n  prevprice: 500,\n  id: 21322,\n  itemrating: {\n    total: 43,\n    rating: 4,\n    comments: [{\n      date: \"22/10 /2020\",\n      author: \"Dan Balan0\",\n      title: \"Rocks\",\n      rating: 4,\n      text: \"Once I got the legend pro on my hand The glasses feel sturdy and look good. Don't know how well the scratch resistance is yet, but they provided you a lifetime warranty so I'm not too worry about it.\"\n    }, {\n      date: \"22/10 /2020\",\n      author: \"Dan Balan0\",\n      title: \"Rocks\",\n      rating: 2,\n      text: \"Once I got the legend pro on my hand The glasses feel sturdy and look good. Don't know how well the scratch resistance is yet, but they provided you a lifetime warranty so I'm not too worry about it.\"\n    }]\n  }\n};\nconst [stateReview, setReviewState] = useState(itemState);\nexport const cartReducer = (state, action) => {\n  switch (action.type) {\n    case \"add_item\":\n      const newitem = { ...action.payload,\n        quant: 1,\n        total: action.payload.price\n      };\n      const currart = newitem.art;\n      console.log(currart);\n      const index = state.cart.findIndex(x => x.art === currart);\n\n      if (index < 0) {\n        return { ...state,\n          cart: [...state.cart, newitem],\n          total: state.total + newitem.price\n        };\n      } else {\n        state.cart[index].quant = state.cart[index].quant + 1;\n        state.cart[index].total = state.cart[index].total + state.cart[index].price;\n        state.total = state.total + state.cart[index].price;\n        return { ...state\n        };\n      }\n\n    case \"add_quant_test\":\n      const idadd = action.payload;\n      state.cart[idadd].quant = state.cart[idadd].quant + 1;\n      state.cart[idadd].total = state.cart[idadd].total + state.cart[idadd].price;\n      state.total = state.total + state.cart[idadd].price;\n      console.log(state, \"addquant\");\n      return { ...state\n      };\n\n    case \"minus_quant_test\":\n      const idminus = action.payload;\n      state.cart[idminus].quant = state.cart[idminus].quant - 1;\n      state.cart[idminus].total = state.cart[idminus].total - state.cart[idminus].price;\n      state.total = state.total - state.cart[idminus].price;\n\n      if (state.cart[idminus] === 0) {\n        return state.filter(item => item.id === idminus);\n      }\n\n      console.log(state, \"addquant\");\n      return { ...state\n      };\n\n    case \"send_order\":\n      const neworder = {\n        num: 1223,\n        customer: \"oleg\",\n        items: state.cart,\n        total: state.total\n      };\n      return { ...state,\n        cart: [],\n        total: 0,\n        order: [...state.order, neworder]\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["C:/Users/LH/Desktop/projects/reactApp/meteorproject/src/context/reducer.js"],"names":["React","useState","ContextApp","createContext","initialState","cart","id","name","price","quant","total","art","order","itemState","title","prevprice","itemrating","rating","comments","date","author","text","stateReview","setReviewState","cartReducer","state","action","type","newitem","payload","currart","console","log","index","findIndex","x","idadd","idminus","filter","item","neworder","num","customer","items"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nexport const ContextApp = React.createContext();\r\n\r\nexport const initialState = {\r\n  cart: [\r\n    { id: 1, name: \"item1\", price: 45, quant: 1, total: 45, art: 123 },\r\n    { id: 2, name: \"item1\", price: 45, quant: 1, total: 45, art: 124 },\r\n    { id: 3, name: \"item1\", price: 45, quant: 1, total: 45, art: 125 },\r\n  ],\r\n  total: 135,\r\n  order: [],\r\n};\r\n\r\nexport const itemState = {\r\n  title: \"FIRE MIRROR COLORBOOST  POLARIZED SMOKE LENS\",\r\n  price: 450,\r\n  art: 125,\r\n  prevprice: 500,\r\n  id: 21322,\r\n  itemrating: {\r\n    total: 43,\r\n    rating: 4,\r\n    comments: [\r\n      {\r\n        date: \"22/10 /2020\",\r\n        author: \"Dan Balan0\",\r\n        title: \"Rocks\",\r\n        rating: 4,\r\n        text:\r\n          \"Once I got the legend pro on my hand The glasses feel sturdy and look good. Don't know how well the scratch resistance is yet, but they provided you a lifetime warranty so I'm not too worry about it.\",\r\n      },\r\n      {\r\n        date: \"22/10 /2020\",\r\n        author: \"Dan Balan0\",\r\n        title: \"Rocks\",\r\n        rating: 2,\r\n        text:\r\n          \"Once I got the legend pro on my hand The glasses feel sturdy and look good. Don't know how well the scratch resistance is yet, but they provided you a lifetime warranty so I'm not too worry about it.\",\r\n      },\r\n    ],\r\n  },\r\n};\r\nconst [stateReview, setReviewState] = useState(itemState);\r\nexport const cartReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"add_item\":\r\n      const newitem = {\r\n        ...action.payload,\r\n        quant: 1,\r\n        total: action.payload.price,\r\n      };\r\n\r\n      const currart = newitem.art;\r\n      console.log(currart);\r\n      const index = state.cart.findIndex((x) => x.art === currart);\r\n      if (index < 0) {\r\n        return {\r\n          ...state,\r\n          cart: [...state.cart, newitem],\r\n          total: state.total + newitem.price,\r\n        };\r\n      } else {\r\n        state.cart[index].quant = state.cart[index].quant + 1;\r\n        state.cart[index].total =\r\n          state.cart[index].total + state.cart[index].price;\r\n        state.total = state.total + state.cart[index].price;\r\n        return {\r\n          ...state,\r\n        };\r\n      }\r\n\r\n    case \"add_quant_test\":\r\n      const idadd = action.payload;\r\n      state.cart[idadd].quant = state.cart[idadd].quant + 1;\r\n      state.cart[idadd].total =\r\n        state.cart[idadd].total + state.cart[idadd].price;\r\n      state.total = state.total + state.cart[idadd].price;\r\n      console.log(state, \"addquant\");\r\n\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case \"minus_quant_test\":\r\n      const idminus = action.payload;\r\n      state.cart[idminus].quant = state.cart[idminus].quant - 1;\r\n      state.cart[idminus].total =\r\n        state.cart[idminus].total - state.cart[idminus].price;\r\n      state.total = state.total - state.cart[idminus].price;\r\n      if (state.cart[idminus] === 0) {\r\n        return state.filter((item) => item.id === idminus);\r\n      }\r\n      console.log(state, \"addquant\");\r\n\r\n      return {\r\n        ...state,\r\n      };\r\n\r\n    case \"send_order\":\r\n      const neworder = {\r\n        num: 1223,\r\n        customer: \"oleg\",\r\n        items: state.cart,\r\n        total: state.total,\r\n      };\r\n\r\n      return {\r\n        ...state,\r\n        cart: [],\r\n        total: 0,\r\n        order: [...state.order, neworder],\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}