{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\LH\\\\Desktop\\\\projects\\\\reactApp\\\\meteorproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\LH\\\\Desktop\\\\projects\\\\reactApp\\\\meteorproject\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Grid from\"@material-ui/core/Grid\";import Review from\"./Review\";import Rating from\"@material-ui/lab/Rating\";import Typography from\"@material-ui/core/Typography\";import Box from\"@material-ui/core/Box\";import TextField from\"@material-ui/core/TextField\";import Button from\"@material-ui/core/Button\";import{ContextApp}from\"../context/reducer\";import Pagination from\"@material-ui/lab/Pagination\";import{Container}from\"@material-ui/core\";var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},paper:{padding:theme.spacing(2),textAlign:\"center\",color:theme.palette.text.secondary},text:{width:\"100%\",maxWidth:500},image:{width:\"100%\"},formitem:{flexDirection:\"row\",display:\"flex\"},pagination:{width:\"300px\",margin:\"auto\",marginTop:\"30px\",\"& > * + *\":{marginTop:theme.spacing(2)}}};});export default function Reviews(props){var classes=useStyles();var _useContext=useContext(ContextApp),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),displayForm=_useState2[0],setDisplay=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setpage=_useState4[1];var _useState5=useState({title:\"\",text:\"\",rating:0,author:\"Dan dan\",date:\"11/22/2099\"}),_useState6=_slicedToArray(_useState5,2),reviewState=_useState6[0],setReview=_useState6[1];var submitHandler=function submitHandler(event){event.preventDefault();// const newState = {\n//   ...itemState,\n//   itemrating: {\n//     ...itemState.itemrating,\n//     comments: [...itemState.itemrating.comments, reviewState],\n//   },\n// };\n// itemState = newState;\ndispatch({type:\"add_comments\",payload:reviewState});setReview({title:\"\",text:\"\",rating:0,author:\"Dan dan\",date:\"11/22/2099\"});setDisplay(false);};var changeText=function changeText(event){setReview(_objectSpread(_objectSpread({},reviewState),{},{text:event.target.value}));};var changeTitle=function changeTitle(event){setReview(_objectSpread(_objectSpread({},reviewState),{},{title:event.target.value}));};var changeRating=function changeRating(event){setReview(_objectSpread(_objectSpread({},reviewState),{},{rating:Number(event.target.value)}));};var formHandler=function formHandler(){displayForm?setDisplay(false):setDisplay(true);};var handleChange=function handleChange(event,value){setpage(value);};return/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return formHandler();},variant:\"outlined\"},\"Write review\"),\" \"),displayForm&&/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(\"form\",{onSubmit:submitHandler,className:classes.root,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(TextField,{id:\"standard-basic\",label:\"Name\",className:classes.formitem,value:reviewState.title,onChange:function onChange(event){return changeTitle(event);}}),/*#__PURE__*/React.createElement(TextField,{fullWidth:true,id:\"outlined-multiline-static\",label:\"Multiline\",multiline:true,rows:4,value:reviewState.text,className:classes.formitem,onChange:function onChange(event,newValue){changeText(event);}}),/*#__PURE__*/React.createElement(Box,{component:\"fieldset\",mb:3,borderColor:\"transparent\"},/*#__PURE__*/React.createElement(Typography,{component:\"legend\"},\"Controlled\"),/*#__PURE__*/React.createElement(Rating,{name:\"simple-controlled\",value:reviewState.rating,onChange:function onChange(event,newValue){changeRating(event);}})),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",type:\"submit\"},\"Send\"))),state.itemState[0].comments.slice(page*5-5,page*5).map(function(item){return/*#__PURE__*/React.createElement(Review,{item:item});}),/*#__PURE__*/React.createElement(Container,{maxWidth:\"sm\"},/*#__PURE__*/React.createElement(Pagination,{className:classes.pagination,count:Math.ceil(state.itemState[0].comments.length/5),page:page,onChange:handleChange})));}","map":{"version":3,"sources":["C:/Users/LH/Desktop/projects/reactApp/meteorproject/src/components/Reviews.js"],"names":["React","useState","useContext","makeStyles","Grid","Review","Rating","Typography","Box","TextField","Button","ContextApp","Pagination","Container","useStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","width","maxWidth","image","formitem","flexDirection","display","pagination","margin","marginTop","Reviews","props","classes","state","dispatch","displayForm","setDisplay","page","setpage","title","rating","author","date","reviewState","setReview","submitHandler","event","preventDefault","type","payload","changeText","target","value","changeTitle","changeRating","Number","formHandler","handleChange","newValue","itemState","comments","slice","map","item","Math","ceil","length"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Review from \"./Review\";\r\nimport Rating from \"@material-ui/lab/Rating\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { ContextApp } from \"../context/reducer\";\r\nimport Pagination from \"@material-ui/lab/Pagination\";\r\nimport { Container } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: \"center\",\r\n    color: theme.palette.text.secondary,\r\n  },\r\n\r\n  text: {\r\n    width: \"100%\",\r\n    maxWidth: 500,\r\n  },\r\n  image: {\r\n    width: \"100%\",\r\n  },\r\n  formitem: {\r\n    flexDirection: \"row\",\r\n    display: \"flex\",\r\n  },\r\n  pagination: {\r\n    width: \"300px\",\r\n    margin: \"auto\",\r\n    marginTop: \"30px\",\r\n    \"& > * + *\": {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function Reviews(props) {\r\n  const classes = useStyles();\r\n  const { state, dispatch } = useContext(ContextApp);\r\n  const [displayForm, setDisplay] = useState(false);\r\n  const [page, setpage] = useState(1);\r\n  const [reviewState, setReview] = useState({\r\n    title: \"\",\r\n    text: \"\",\r\n    rating: 0,\r\n    author: \"Dan dan\",\r\n    date: \"11/22/2099\",\r\n  });\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n    // const newState = {\r\n    //   ...itemState,\r\n    //   itemrating: {\r\n    //     ...itemState.itemrating,\r\n    //     comments: [...itemState.itemrating.comments, reviewState],\r\n    //   },\r\n    // };\r\n    // itemState = newState;\r\n    dispatch({ type: \"add_comments\", payload: reviewState });\r\n    setReview({\r\n      title: \"\",\r\n      text: \"\",\r\n      rating: 0,\r\n      author: \"Dan dan\",\r\n      date: \"11/22/2099\",\r\n    });\r\n    setDisplay(false);\r\n  };\r\n  const changeText = (event) => {\r\n    setReview({ ...reviewState, text: event.target.value });\r\n  };\r\n  const changeTitle = (event) => {\r\n    setReview({ ...reviewState, title: event.target.value });\r\n  };\r\n  const changeRating = (event) => {\r\n    setReview({ ...reviewState, rating: Number(event.target.value) });\r\n  };\r\n  const formHandler = () => {\r\n    displayForm ? setDisplay(false) : setDisplay(true);\r\n  };\r\n  const handleChange = (event, value) => {\r\n    setpage(value);\r\n  };\r\n\r\n  return (\r\n    <Grid container spacing={3}>\r\n      <Grid item xs={12}>\r\n        <Button onClick={() => formHandler()} variant=\"outlined\">\r\n          Write review\r\n        </Button>{\" \"}\r\n      </Grid>\r\n      {displayForm && (\r\n        <Grid item xs={12}>\r\n          <form\r\n            onSubmit={submitHandler}\r\n            className={classes.root}\r\n            noValidate\r\n            autoComplete=\"off\"\r\n          >\r\n            <TextField\r\n              id=\"standard-basic\"\r\n              label=\"Name\"\r\n              className={classes.formitem}\r\n              value={reviewState.title}\r\n              onChange={(event) => changeTitle(event)}\r\n            />\r\n            <TextField\r\n              fullWidth\r\n              id=\"outlined-multiline-static\"\r\n              label=\"Multiline\"\r\n              multiline\r\n              rows={4}\r\n              value={reviewState.text}\r\n              className={classes.formitem}\r\n              onChange={(event, newValue) => {\r\n                changeText(event);\r\n              }}\r\n            />\r\n            <Box component=\"fieldset\" mb={3} borderColor=\"transparent\">\r\n              <Typography component=\"legend\">Controlled</Typography>\r\n              <Rating\r\n                name=\"simple-controlled\"\r\n                value={reviewState.rating}\r\n                onChange={(event, newValue) => {\r\n                  changeRating(event);\r\n                }}\r\n              />\r\n            </Box>\r\n            <Button variant=\"contained\" type=\"submit\">\r\n              Send\r\n            </Button>\r\n          </form>\r\n        </Grid>\r\n      )}\r\n      {state.itemState[0].comments.slice(page * 5 - 5, page * 5).map((item) => {\r\n        return <Review item={item} />;\r\n      })}\r\n      <Container maxWidth=\"sm\">\r\n        <Pagination\r\n          className={classes.pagination}\r\n          count={Math.ceil(state.itemState[0].comments.length / 5)}\r\n          page={page}\r\n          onChange={handleChange}\r\n        />\r\n      </Container>\r\n    </Grid>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}